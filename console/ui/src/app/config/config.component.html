<ngb-alert type="danger" *ngIf="configError">
  <img src="../assets/svg/red-triangle.svg" alt="" width="16" height="" class="mr-2">
  <h6 class="mr-2 d-inline font-weight-bold">Failed to retrieve configuration.</h6>
</ngb-alert>

<div class="d-flex justify-content-between mb-5">
  <h2>Config</h2>
  <button class="btn btn-primary btn-sm" (click)="exportYaml()">Export</button>
</div>

<ng-container *ngFor="let c of flatConfig; let i = index;">
  <div *ngIf="i % 2 === 0" class="row border">
    <div class="col-xl-6 py-4">
      <div class="d-flex justify-content-between">
        <span>
          <b>{{c.name}}</b>
          <label class="pl-1" [for]="c.name">{{c.value.name}}
            <a target="_blank" href="https://heroiclabs.com/docs/install-configuration/#{{c.value.name}}" class="d-inline"><img src="../assets/svg/hint.svg" alt="" width="16" height=""></a>
          </label>
        </span>

        <span *ngIf="!isEmpty(c.value)" [id]="c.name" class="pl-4 w-50 bl">{{c.value}}</span>
        <span *ngIf="isEmpty(c.value)" [id]="c.name" class="pl-4 w-50 bl opaque">(Empty)</span>
      </div>
    </div>
    <div *ngIf="i <= flatConfig.length" class="col-xl-6 py-4 bl">
      <div class="d-flex justify-content-between">
        <span>
          <b>{{flatConfig[i+1].name}}</b>
          <label class="pl-1" [for]="flatConfig[i+1].name">{{flatConfig[i+1].value.name}}
            <a target="_blank" href="https://heroiclabs.com/docs/install-configuration/#{{flatConfig[i+1].value.name}}" class="d-inline"><img src="../assets/svg/hint.svg" alt="" width="16" height=""></a>
          </label>
        </span>
        <span *ngIf="!isEmpty(flatConfig[i+1].value)" [id]="flatConfig[i+1].name" class="pl-4 w-50 bl">{{flatConfig[i+1].value}}</span>
        <span *ngIf="isEmpty(flatConfig[i+1].value)" [id]="flatConfig[i+1].name" class="pl-4 w-50 bl opaque">(Empty)</span>
      </div>
    </div>
  </div>
</ng-container>

<h5 class="mt-5">Import storage data</h5>
<hr>

<p>Import storage objects from a csv or json file by dragging and dropping it below.</p>

<ngb-alert type="danger" *ngIf="uploadError" [dismissible]="false">
  <img src="../assets/svg/red-triangle.svg" alt="" width="16" height="" class="mr-2">
  <h6 class="mr-2 d-inline font-weight-bold">Failed to upload import data.</h6>
  <p class="mb-0 pl-4">{{uploadError}}</p>
</ngb-alert>

<ngb-alert *ngIf="uploadSuccess" type="success" [dismissible]="false">
  <img src="../assets/svg/green-tick.svg" alt="" width="16" height="" class="mr-2">
  <h6 class="mr-2 d-inline font-weight-bold">Storage data successfully imported.</h6>
</ngb-alert>

<ngx-file-drop accept=".yml,.yaml,.csv" [disabled]="uploading" dropZoneClassName="drop-zone" contentClassName="drop-zone-content" dropZoneLabel="Drop csv or json file here" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)">
  <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
    <button class="btn btn-primary" type="button" (click)="openFileSelector()">Browse Files</button>
  </ng-template>
</ngx-file-drop>

<h5 class="d-inline mt-5">Delete all data</h5>
<hr>
<p>Delete all storage objects. This operation cannot be undone.</p>

<div class="alert alert-danger d-flex justify-content-between" role="alert">
  <div>
    <img src="../assets/svg/red-triangle.svg" alt="" width="16" height="">
    <small>Warning, this operation is not reversible!</small>
  </div>
  <button type="button" class="btn btn-danger">Delete all</button>
</div>

